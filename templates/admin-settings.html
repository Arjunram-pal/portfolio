{% extends "base.html" %}

{% block title %}Admin Settings - AI Train{% endblock %}

{% block content %}

<div class="main-content">
  {% include "navbar.html" %}

  <article class="contact active">
    <header>
      <h2 class="h2 article-title">Admin Settings</h2>
    </header>

    <section class="contact-form">
      <h3 class="h3 form-title">Update Credentials</h3>

      {% if error %}
      <div class="auth-alert auth-alert-error" role="alert">{{ error }}</div>
      {% endif %}
      {% if success %}
      <div class="auth-alert auth-alert-success" role="status">{{ success }}</div>
      {% endif %}

      <form class="form" method="post" action="/admin/account" data-auth-form>
        <div class="input-wrapper">
          <div class="auth-field">
            <label for="new-username" class="auth-label">New Username</label>
            <input id="new-username" type="text" name="new_username" class="form-input" value="{{ admin_username }}" required minlength="3" autocomplete="username">
            <p class="auth-inline-error" data-error-for="new_username" aria-live="polite"></p>
          </div>
          <div class="auth-field">
            <label for="current-password" class="auth-label">Current Password</label>
            <div class="password-input-wrap">
              <input id="current-password" type="password" name="current_password" class="form-input" required autocomplete="current-password">
              <button type="button" class="password-toggle-btn" data-toggle-password data-target="current-password" aria-label="Show password">Show</button>
            </div>
            <p class="auth-inline-error" data-error-for="current_password" aria-live="polite"></p>
          </div>
        </div>

        <div class="input-wrapper">
          <div class="auth-field">
            <label for="new-password" class="auth-label">New Password (Optional)</label>
            <div class="password-input-wrap">
              <input id="new-password" type="password" name="new_password" class="form-input" minlength="6" autocomplete="new-password">
              <button type="button" class="password-toggle-btn" data-toggle-password data-target="new-password" aria-label="Show password">Show</button>
            </div>
            <p class="auth-password-strength" data-password-strength aria-live="polite"></p>
            <p class="auth-inline-error" data-error-for="new_password" aria-live="polite"></p>
          </div>
          <div class="auth-field">
            <label for="confirm-password" class="auth-label">Confirm New Password</label>
            <div class="password-input-wrap">
              <input id="confirm-password" type="password" name="confirm_password" class="form-input" minlength="6" autocomplete="new-password">
              <button type="button" class="password-toggle-btn" data-toggle-password data-target="confirm-password" aria-label="Show password">Show</button>
            </div>
            <p class="auth-inline-error" data-error-for="confirm_password" aria-live="polite"></p>
          </div>
        </div>

        <button class="form-btn" type="submit" data-submit-btn>
          <ion-icon name="save-outline"></ion-icon>
          <span>Save Changes</span>
        </button>
      </form>
    </section>
  </article>
</div>

{% endblock %}
